# Avatar Chat Server - Environment Variables
# Copy this file to .env and fill in your values

# =============================================================================
# OpenAI Configuration (Required for sample_openai agent)
# =============================================================================
OPENAI_API_KEY=sk-your-api-key-here
OPENAI_MODEL=gpt-4o-realtime-preview
OPENAI_VOICE=alloy

# Voice Activity Detection (VAD) settings for interruption sensitivity
# Lower threshold = more sensitive to speech (0.0-1.0, default: 0.5)
OPENAI_VAD_THRESHOLD=0.5
# How long to wait for silence before ending turn (ms, default: 300)
OPENAI_VAD_SILENCE_DURATION_MS=300
# Audio padding before detected speech (ms, default: 300)
OPENAI_VAD_PREFIX_PADDING_MS=300
# VAD type: server_vad (silence-based), semantic_vad (meaning-based), or none (manual)
OPENAI_VAD_TYPE=server_vad
# Transcription model for user speech
OPENAI_TRANSCRIPTION_MODEL=  gpt-4o-transcribe
# Transcription language (helps prevent hallucinations)
OPENAI_TRANSCRIPTION_LANGUAGE=en
# Noise reduction: near_field (close mic) or far_field (room mic)
OPENAI_NOISE_REDUCTION=near_field
# Voice speed (0.25 to 1.5, where 1.0 is normal speed)
OPENAI_VOICE_SPEED=1.0

# =============================================================================
# Gemini Configuration (Required for sample_gemini agent)
# =============================================================================
GEMINI_API_KEY=your-gemini-api-key-here
GEMINI_MODEL=gemini-2.5-flash-native-audio-preview-12-2025
# Available voices: Puck, Charon, Kore, Fenrir, Aoede, Leda, Orus, Zephyr
GEMINI_VOICE=Kore
# Thinking mode: budget in tokens (0=disabled, -1=dynamic, 1-32768=fixed budget)
# Only works with models that support thinking (e.g., gemini-2.5-flash, gemini-2.5-pro)
GEMINI_THINKING_BUDGET=-1
# Enable Google Search grounding for up-to-date information
GEMINI_GOOGLE_SEARCH_GROUNDING=false
# Proactive audio: model can decide not to respond if input is not relevant
GEMINI_PROACTIVE_AUDIO=false
# Context window compression: enables sessions longer than 15 minutes
GEMINI_CONTEXT_WINDOW_COMPRESSION=true

# =============================================================================
# Agent Configuration
# =============================================================================
AGENT_TYPE=sample_openai  # Options: sample_openai, sample_gemini, remote
AGENT_URL=  # For remote agent: ws://agent-service:8080/ws

# =============================================================================
# Assistant Configuration
# =============================================================================
ASSISTANT_INSTRUCTIONS=You are a helpful and friendly AI assistant. Be concise in your responses.

# =============================================================================
# Audio2Expression Model Configuration (ONNX CPU-only)
# =============================================================================
# Path to the ONNX model for CPU inference
ONNX_MODEL_PATH=./pretrained_models/wav2arkit_cpu.onnx

# =============================================================================
# Server Configuration
# =============================================================================
SERVER_HOST=0.0.0.0
SERVER_PORT=8080
DEBUG=false

# =============================================================================
# Authentication Configuration
# Generate AUTH_SECRET_KEY with: openssl rand -hex 32
# =============================================================================
AUTH_ENABLED=true
AUTH_SECRET_KEY=your-secret-key-here-generate-with-openssl-rand-hex-32
AUTH_TOKEN_TTL=3600
AUTH_ALLOWED_ORIGINS=https://myned.ai,https://www.myned.ai
AUTH_ENABLE_RATE_LIMITING=true
